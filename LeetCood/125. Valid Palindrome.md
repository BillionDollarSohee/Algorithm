[리트코드 125 - 유효한 팬린드롬](https://leetcode.com/problems/valid-palindrome/description/)
이번에는 난이도를 조금 높여서 대소문자가 섞이거나 `.`이나 `?`과 같은 부호가 섞인 문장이 팬린드롬인지 확인해야 한다. "Do geese see God?"을 입력 받아서 ture를 출력하는 메소드를 만들어보자.

이번에는 첫글자와 마지막 문자가 부호는 제외해야 하므로 영숫자인 확인하고`isLetterOrDigit()`, 
모두 소문자로`toLowerCase` (또는 대문자로`toUpperCase`) 변환한 후 동일한지 확인하면 된다.

```java
class Solution {
    public boolean isPalindrome(String s) {
        int start = 0;
        int end = s.length() - 1;

        while ( start < end ) {
            if(!Character.isLetterOrDigit(s.charAt(start))) {
                start++;
            } else  if (!Character.isLetterOrDigit(s.charAt(end))) {
                end--;
            } else {
                if (Character.toLowerCase(s.charAt(start)) != Character.toLowerCase(s.charAt(end))) {
                    return false;
                }

                start++;
                end--;
            }
        }

        return true;
    }
}

// 결과
"A man, a plan, a canal: Panama" -> true
"race a car" -> false
" " -> true
```

![](https://velog.velcdn.com/images/soheelog/post/a92ad6e5-08fa-4c3f-80c2-7162ad514082/image.png)

또다른 풀이로 문자를 추출하지 않고, 필터와 정규식으로 문자를 추출한 다음 소문자로 변환하고,
문자열을 뒤집어서 다시 문자열로 변경한 다음 비교하는 방식으로도 풀 수 있다.
정규식 앞에 `^`를 붙임으로서 대소문자,숫자를 제외한 것들은 제거할 수 있다.

```java
class Solution {
    public boolean isPalindrome(String s) {
        String filler = s.replaceAll("[^A-Za-z0-9]", "").toLowerCase();
        String reverse = new StringBuilder(filler).reverse().toString();
        return filler.equals(reverse);
    }
}
```

![](https://velog.velcdn.com/images/soheelog/post/e2273b14-d87b-43a8-a411-f59f824316bc/image.png)

코드가 훨씬 간결해졌고, 똑같이 잘 작동하지만 StringBuilder는 `reverse()`를 제공하여 편리한 것 같지만 스레드 안전에 취약하고, 클래스를 직접 비교하다보니 실행 속도가 저하된 부분을 확인 할 수 있다. 
정규식을 사용한 부분도 속도 저하가 크게 일어난다.

첫 번째 풀이를 코틀린으로 바꿔보면 어떨까? when식으로 좀 더 간결해졌다.
리트코드의 코틀린이 속도 측정 방식 때문에 실행 시간이 오래 걸리는 것을 감안해야 하므로 속도가 약간 떨어져보이지만 실상은 거의 동일한 속도로 실행된다고 봐야한다.

```kotlin
class Solution {
    fun isPalindrome(s: String): Boolean {
        var start = 0
        var end = s.length - 1

        while (start < end) {
            when {
                !Character.isLetterOrDigit(s[start]) -> start++
                !Character.isLetterOrDigit(s[end]) -> end--
                else -> {
                    if (Character.toLowerCase(s[start]) != Character.toLowerCase(s[end])) {
                        return false
                    }
                    start++
                    end--
                }
            }
        }

        return true
    }
}
```

![](https://velog.velcdn.com/images/soheelog/post/a9a57b0e-5912-4255-9344-056ff7676a82/image.png)
